---

# [swb-0] コンセント抜き差しで、ポットを利用できない/利用できる状態にする。

| 要求の補足 | 内容 |
|:---|:---|
|理由|特別なハード部品なしに利用できない状態/できる状態にした。|
|説明|２．１章～５章は、コンセントを差し込んでいる時の要求仕様である。|

* [swb-0-1] コンセントを差し込むと、設定値にはデフォルト値がセットされ、ポットが機能する状態（アイドル）になる。【説明】各要求に対する仕様の＜デフォルト＞を参照。

* [swb-0-2] コンセントを抜くと、ポットは蓋の開け閉め以外は何も機能しなくなる。

# [swb-0]アイドルの状態で、蓋を閉じたら、水位を確認し、条件に合えば沸騰行為をする。

| 要求の補足 | 内容 |
|:---|:---|
|理由|蓋を閉めるという行為で加熱（沸騰）の指示をしたい.|
|説明|沸騰行為の詳細は、３章の「温度制御行為」に記載する。蓋センサがonになって3sec経過するのを待つ理由は、注水やポットの移動の直後に、水面が波打っている状況が考えられるので、水面状態が安定する時間を想定したためである。|

＜蓋「閉」を確認する＞
* [pot-220-11]蓋センサが3sec以上onとなったら、蓋が閉じられたと判断する。

---

# 要求仕様書には以下を含めること

## How どうやって

## What なにを　／　Why　なぜ

## Who どの機能が / Where どこの機能が　どのぐらいの範囲で

## When いつ、どのような順序で、どのぐらいの期間

合理主義、経験主義、選択的無知

---

# [swb-1]Telnet端末からコマンドを実行する

| 要求の補足 | 内容 |
|:---|:---|
|理由|コマンドを入力してサーボやリレーを動作させたいから。サーボを動作させるために、ポートにPWMを出力させたり、リレーを動作させるために、ポートをON／OFFしたい。|
|説明|コマンドの種類は別のファイルで定義する。|

＜ポートをON／OFFする＞
* [swb-1-1] コマンドを入力すると、ポートをONする。
* [swb-1-2] 

＜リレーを動作させる＞

＜サーボを動作させる＞

＜ポートにPWM信号を出力する＞


# [swb-2]REST APIにアクセスして、リレーをON／OFFする。

| 要求の補足 | 内容 |
|:---|:---|
|理由|RESTful APIのフォーマットで[swb-1]で定義したコマンドを実行したい。|
|説明|コマンドの種類は別のファイルで定義する|

# [swb-3]REST APIにアクセスして、PWM波を任意のポートに出力する。

- [ ] 接続時に接続したIPアドレスを表示できます。
- [ ] 初期化ボタンで、WiFiのログイン情報を消去することが出来ます。
- [ ] APモード、STAモードの切り替えができます（ボタン）（トグルスイッチ？）
- [ ] REST APIにアクセスして、リレーをON／OFFすることが出来ます。
- [ ] REST APIにアクセスして、PWM波をポートに出力出来ます。（サーボ想定）
- [ ] 現在のモードの状態はLEDで確認できます。
- [ ] 通信状態はLEDで確認出来ます。
- [ ] リセットボタンで機器をリセット出来ます。
・電源：
5V2A　USB type C

・マイコン電源：
3V 1Aレギュレーター

・電源：　
マイクロUSB、USB　TYPE-C（5V 2A)

RJ45メスコネクタ（ポート引き出し用）
FTDIシリアルUSBブリッジ

TeraTerm準拠（マクロを使用する例を示すとありがたい）

- [ ] リセットコマンド reset 1000（1000ms後）０即時　
- [ ] リレーコマンド（ON、off）relay on/ off
- [ ] PWMコマンド pwm on/off
- [ ] LEDコマンド led on/off
- [ ] ネットワークコマンド 
- [ ] ログレベルコマンド loglevel
- [ ] 状態表示コマンド（マイコン設定を表示）
- [ ] 自分のIPを表示させるコマンド。ipconfig

5ボルトACアダブターで動作（これはアイセグのACアダプタを利用する。）
→マイコンにも給電するし、AiSEGにも給電する
ESP32（２Aの3.3Vレギュレーターを使用する）
リレー方式
オンオフするだけ。
初期化ボタン必要！
今気がついた。

リセットボタン必要
WiFi繋がったら青のLEDが、つかないと分からない。赤の時は、アクセスポイントモード。ステーションモードは緑。

シリアルログをOneDriveに保存したい。
